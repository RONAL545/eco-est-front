<div class="dashboard-container">
  <!-- Filters Card -->
  <mat-card class="filter-card elevation-2">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>filter_list</mat-icon>
        Filtros
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="filters">
        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Sede - Pabellón</mat-label>
          <mat-icon matPrefix>business</mat-icon>
          <mat-select>
            <mat-option value="general">General</mat-option>
            <mat-option value="santa-catalina">Santa Catalina</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Pabellón - Espacio</mat-label>
          <mat-icon matPrefix>meeting_room</mat-icon>
          <mat-select>
            <mat-option value="todos">Todos</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="outline" class="filter-field">
          <mat-label>Fecha</mat-label>
          <mat-icon matPrefix>event</mat-icon>
          <input matInput [matDatepicker]="picker">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <button mat-raised-button color="accent" class="export-btn" (click)="exportData()">
          <mat-icon>download</mat-icon>
          <span class="button-text">Exportar .xls</span>
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Table Card -->
    <mat-card class="table-card elevation-2">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>table_chart</mat-icon>
          Datos de Reciclaje por Pabellón
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="table-container">
          <table mat-table [dataSource]="dataSource" class="data-table mat-elevation-z0">
            <ng-container matColumnDef="pabellon">
              <th mat-header-cell *matHeaderCellDef>Pabellón</th>
              <td mat-cell *matCellDef="let row">{{row.pabellon}}</td>
            </ng-container>

            <ng-container matColumnDef="plastico">
              <th mat-header-cell *matHeaderCellDef>Plástico<span class="mobile-hidden"> (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.plastico}}</td>
            </ng-container>

            <ng-container matColumnDef="carton">
              <th mat-header-cell *matHeaderCellDef>Cartón<span class="mobile-hidden"> o Papel (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.carton}}</td>
            </ng-container>

            <ng-container matColumnDef="vidrio">
              <th mat-header-cell *matHeaderCellDef>Vidrio<span class="mobile-hidden"> (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.vidrio}}</td>
            </ng-container>

            <ng-container matColumnDef="organico">
              <th mat-header-cell *matHeaderCellDef>R. Org.<span class="mobile-hidden"> (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.organico}}</td>
            </ng-container>

            <ng-container matColumnDef="metal">
              <th mat-header-cell *matHeaderCellDef>Metal<span class="mobile-hidden"> (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.metal}}</td>
            </ng-container>

            <ng-container matColumnDef="no_aprovechable">
              <th mat-header-cell *matHeaderCellDef>No Aprov.<span class="mobile-hidden"> (kg)</span></th>
              <td mat-cell *matCellDef="let row">{{row.no_aprovechable}}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Chart Card -->
    <mat-card class="chart-card elevation-2">
      <mat-card-header>
        <mat-card-title>
          <mat-icon>pie_chart</mat-icon>
          Distribución por Categoría
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="chart-wrapper">
          <canvas baseChart
                  [data]="pieChartData"
                  [options]="pieChartOptions"
                  type="pie">
          </canvas>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
